# ì±—ë…¸íŠ¸ AI ì—­í•  ìš”ì•½ì„œ

> ìµœì¢… ì—…ë°ì´íŠ¸: 2025-01-06

---

## ëª©ì°¨
1. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#1-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
2. [AI í•¨ìˆ˜ ìƒì„¸](#2-ai-í•¨ìˆ˜-ìƒì„¸)
3. [MCP ì„œë²„ ë„êµ¬](#3-mcp-ì„œë²„-ë„êµ¬)
4. [Skill ì„œë²„ íë¦„](#4-skill-ì„œë²„-íë¦„)
5. [ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ë¡œì§](#5-ì¹´í…Œê³ ë¦¬-ë¶„ë¥˜-ë¡œì§)

---

## 1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì±—ë…¸íŠ¸ (ChatNote)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   PlayMCP    â”‚     â”‚  ì¹´ì¹´ì˜¤í†¡    â”‚     â”‚   Redis      â”‚   â”‚
â”‚  â”‚   (AIì±„íŒ…)   â”‚     â”‚   ì±—ë´‡       â”‚     â”‚  (Upstash)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                    â”‚                    â”‚            â”‚
â”‚         â–¼                    â–¼                    â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚            â”‚
â”‚  â”‚ mcp_server   â”‚     â”‚   skill.py   â”‚           â”‚            â”‚
â”‚  â”‚  (8 Tools)   â”‚     â”‚  (Skill API) â”‚           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚            â”‚
â”‚         â”‚                    â”‚                    â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚            â”‚
â”‚                  â–¼                                â”‚            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚            â”‚
â”‚         â”‚ memo_service â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                â”‚                                              â”‚
â”‚                â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚          classifier.py               â”‚                    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                    â”‚
â”‚  â”‚  â”‚     OpenAI GPT-4o-mini        â”‚  â”‚                    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. AI í•¨ìˆ˜ ìƒì„¸

### ğŸ“ lib/classifier.py

| # | í•¨ìˆ˜ëª… | AI ì‚¬ìš© | ìš©ë„ | í˜¸ì¶œ ìœ„ì¹˜ |
|---|--------|---------|------|-----------|
| 1 | `fast_rule_classify()` | âŒ ê·œì¹™ | ë¹ ë¥¸ ì˜ë„ ë¶„ë¥˜ (ì •í™• ë§¤ì¹­) | skill.py |
| 2 | `classify_intent()` | âš¡ ì„ íƒ | ì˜ë„ ë¶„ë¥˜ (ê·œì¹™â†’AI í´ë°±) | skill.py |
| 3 | `openai_intent_classification()` | âœ… GPT | ì˜ë„ AI ë¶„ë¥˜ | classify_intent |
| 4 | `analyze_memo()` | âœ… GPT | ë©”ëª¨ ë¶„ì„ (ì¹´í…Œê³ ë¦¬+íƒœê·¸+ìš”ì•½) | memo_service |
| 5 | `openai_classification()` | âœ… GPT | ë©”ëª¨ AI ë¶„ë¥˜ | analyze_memo |
| 6 | `classify_category_only()` | âš¡ ì„ íƒ | ì¹´í…Œê³ ë¦¬ë§Œ ë¶„ë¥˜ | memo_service |
| 7 | `rule_based_classification()` | âŒ ê·œì¹™ | í´ë°±ìš© ê·œì¹™ ë¶„ë¥˜ | analyze_memo |

---

### 2.1 ì˜ë„ ë¶„ë¥˜ ì‹œìŠ¤í…œ (`classify_intent`)

```
ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   fast_rule_classify() ì‹œë„    â”‚  â† 0ms, ê·œì¹™ ê¸°ë°˜
â”‚   (ì •í™• ë§¤ì¹­: "í†µê³„", "ë„ì›€ë§") â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
     ë§¤ì¹­ ì„±ê³µ? â”€â”€Yesâ”€â”€â–¶ ì¦‰ì‹œ ë°˜í™˜
             â”‚
            No
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  openai_intent_classification() â”‚  â† GPT-4o-mini
â”‚  (Few-shot í”„ë¡¬í”„íŠ¸)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        ì˜ë„ + ì‹ ë¢°ë„ ë°˜í™˜
```

**ë¶„ë¥˜ë˜ëŠ” ì˜ë„ 7ê°€ì§€:**
| ì˜ë„ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `save` | ë©”ëª¨ ì €ì¥ (ê¸°ë³¸) | URL, í…ìŠ¤íŠ¸ ì…ë ¥ |
| `save_with_ai` | AI ë¶„ë¥˜ ì €ì¥ | "AI: ë§›ìˆëŠ” íŒŒìŠ¤íƒ€ì§‘" |
| `summary` | ì •ë¦¬/ìš”ì•½ | "ì˜¤ëŠ˜ ì •ë¦¬", "ì˜ìƒ ì •ë¦¬" |
| `search` | ê²€ìƒ‰ | "ë§›ì§‘ ê²€ìƒ‰" |
| `delete` | ì‚­ì œ | "ì‚­ì œ ìœ íŠœë¸Œ" |
| `reminder` | ë¦¬ë§ˆì¸ë” | "ë¦¬ë§ˆì¸ë”", "ì•Œë¦¼ ëª©ë¡" |
| `stats` | í†µê³„ | "í†µê³„" |
| `help` | ë„ì›€ë§ | "ë„ì›€ë§", "?" |
| `detail` | ìƒì„¸ë³´ê¸° | "#a448275d" |

---

### 2.2 ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ (`classify_category_only`)

```python
async def classify_category_only(content: str, use_ai: bool = False) -> str:
    """
    use_ai=False (ê¸°ë³¸): ì²« ë‹¨ì–´ë¥¼ ì¹´í…Œê³ ë¦¬ë¡œ
    use_ai=True: AIê°€ ë¶„ë¥˜
    """
```

**ë¡œì§:**
```
ì…ë ¥: "ê±´ì¶•ì‚¬ ì¸µê³ ì œí•œê·œì • ì˜ êµ¬ë³„í• ê²ƒ"
        â”‚
        â”œâ”€â”€â”€ use_ai=False â”€â”€â”€â–¶ "ê±´ì¶•ì‚¬" (ì²« ë‹¨ì–´)
        â”‚
        â””â”€â”€â”€ use_ai=True â”€â”€â”€â”€â–¶ GPT-4o-mini í˜¸ì¶œ â”€â”€â”€â–¶ "í•™ìŠµ" or "ê±´ì¶•ì‚¬"
```

**AI ë¶„ë¥˜ í”„ë¡¬í”„íŠ¸:**
```
ê¸°ë³¸ ì¹´í…Œê³ ë¦¬: ì˜ìƒ, ìŒì•…, ë§›ì§‘, ì‡¼í•‘, ì—¬í–‰, í• ì¼, ì•„ì´ë””ì–´, í•™ìŠµ, ê±´ê°•, ì½ì„ê±°ë¦¬

ê·œì¹™:
1. ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹í•˜ë©´ ê·¸ê±¸ë¡œ
2. ì „ë¬¸/íŠ¹ìˆ˜ ë¶„ì•¼ë©´ ì²« ë‹¨ì–´ë‚˜ í•µì‹¬ ì£¼ì œ (ì˜ˆ: ê±´ì¶•ì‚¬, ë²•ë¥ )
3. ì• ë§¤í•˜ë©´ ë©”ëª¨ì˜ ì²« ë‹¨ì–´
```

---

### 2.3 ë©”ëª¨ ë¶„ì„ (`analyze_memo`)

**use_ai=Trueì¼ ë•Œë§Œ í˜¸ì¶œë¨**

```
ì…ë ¥: content + metadata (URL ë©”íƒ€ë°ì´í„°)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    openai_classification()     â”‚
â”‚    GPT-4o-mini                 â”‚
â”‚    temperature: 0.3            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        JSON ë°˜í™˜:
        {
          "category": "ì˜ìƒ",
          "tags": ["ìœ íŠœë¸Œ", "ìŒì•…"],
          "summary": "Rick Astley ë…¸ë˜ ì˜ìƒ"
        }
```

---

## 3. MCP ì„œë²„ ë„êµ¬

### ğŸ“ api/mcp_server.py

**í”„ë¡œí† ì½œ:** JSON-RPC 2.0 (PlayMCP 2025-11-25 ìŠ¤í™)

| # | ë„êµ¬ëª… | ì„¤ëª… | AI ì‚¬ìš© |
|---|--------|------|---------|
| 1 | `search_memo` | ë©”ëª¨ ê²€ìƒ‰ | âŒ |
| 2 | `list_by_category` | ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ | âŒ |
| 3 | `get_summary` | ê¸°ê°„ë³„/ì¹´í…Œê³ ë¦¬ë³„ ìš”ì•½ | âŒ |
| 4 | `get_stats` | í†µê³„ ì¡°íšŒ | âŒ |
| 5 | `get_recent` | ìµœê·¼ ë©”ëª¨ ì¡°íšŒ | âŒ |
| 6 | `add_memo` | ë©”ëª¨ ì €ì¥ | âŒ (URL ë©”íƒ€ë°ì´í„°ë§Œ) |
| 7 | `delete_memo` | ë©”ëª¨ ì‚­ì œ | âŒ |
| 8 | `update_memo` | ë©”ëª¨ ìˆ˜ì • | âŒ |

> âš ï¸ **MCP ë„êµ¬ëŠ” AI ë¶„ë¥˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ**
> PlayMCPì˜ AIê°€ ë„êµ¬ë¥¼ ì„ íƒí•˜ê³ , ë„êµ¬ëŠ” ë°ì´í„° CRUDë§Œ ìˆ˜í–‰

**MCP íë¦„:**
```
PlayMCP AI ì±„íŒ…
    â”‚
    â”‚  "ìœ íŠœë¸Œ ì˜ìƒ ì €ì¥í•´ì¤˜ https://..."
    â”‚
    â–¼
PlayMCP AI (ë„êµ¬ ì„ íƒ)
    â”‚
    â”‚  â†’ add_memo ë„êµ¬ í˜¸ì¶œ
    â”‚
    â–¼
mcp_server.py
    â”‚
    â”‚  â†’ URL ë©”íƒ€ë°ì´í„° ì¶”ì¶œ (OGíƒœê·¸)
    â”‚  â†’ Redis ì €ì¥
    â”‚
    â–¼
ì‘ë‹µ: "âœ… ë©”ëª¨ ì €ì¥ ì™„ë£Œ!"
```

---

## 4. Skill ì„œë²„ íë¦„

### ğŸ“ api/skill.py

**ì¹´ì¹´ì˜¤í†¡ ì±—ë´‡ ìŠ¤í‚¬ API**

```
ì¹´ì¹´ì˜¤í†¡ ì‚¬ìš©ì ì…ë ¥
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     skill_handler()             â”‚
â”‚     POST /skill                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   service_classify_intent()     â”‚  â† AI ì˜ë„ ë¶„ë¥˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€ intent: save â”€â”€â”€â”€â”€â”€â”€â–¶ handle_save(use_ai=False)
             â”‚                                    â”‚
             â”‚                                    â–¼
             â”‚                         classify_category_only()
             â”‚                         (ì²« ë‹¨ì–´ = ì¹´í…Œê³ ë¦¬)
             â”‚
             â”œâ”€â”€â”€ intent: save_with_ai â”€â–¶ handle_save(use_ai=True)
             â”‚                                    â”‚
             â”‚                                    â–¼
             â”‚                           analyze_memo()
             â”‚                           (GPT-4o-mini ë¶„ë¥˜)
             â”‚
             â”œâ”€â”€â”€ intent: summary â”€â”€â”€â”€â–¶ handle_summary()
             â”‚
             â”œâ”€â”€â”€ intent: search â”€â”€â”€â”€â”€â–¶ handle_search()
             â”‚
             â”œâ”€â”€â”€ intent: delete â”€â”€â”€â”€â”€â–¶ handle_delete()
             â”‚
             â”œâ”€â”€â”€ intent: stats â”€â”€â”€â”€â”€â”€â–¶ handle_stats()
             â”‚
             â”œâ”€â”€â”€ intent: reminder â”€â”€â”€â–¶ handle_reminders()
             â”‚
             â”œâ”€â”€â”€ intent: detail â”€â”€â”€â”€â”€â–¶ handle_detail()
             â”‚
             â””â”€â”€â”€ intent: help â”€â”€â”€â”€â”€â”€â”€â–¶ handle_help()
```

---

## 5. ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ë¡œì§

### ìµœì¢… ì •ë¦¬ (2025-01-06)

| ìƒí™© | ë¶„ë¥˜ ë°©ì‹ | ê²°ê³¼ ì˜ˆì‹œ |
|------|----------|----------|
| ì¼ë°˜ ì €ì¥ | ì²« ë‹¨ì–´ = ì¹´í…Œê³ ë¦¬ | "ê±´ì¶•ì‚¬ ê·œì •" â†’ [ê±´ì¶•ì‚¬] |
| "AI:" ì ‘ë‘ì‚¬ | GPT-4o-mini | "AI: ë§›ìˆëŠ” íŒŒìŠ¤íƒ€ì§‘" â†’ [ë§›ì§‘] |
| URL ì €ì¥ | URL ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ê·œì¹™ | youtube.com â†’ [ì˜ìƒ] |

**í‚¤ì›Œë“œ ë§¤ì¹­: ì œê±°ë¨** âŒ

---

## ë¶€ë¡: OpenAI API ì‚¬ìš© ìš”ì•½

### ëª¨ë¸: `gpt-4o-mini`

| ìš©ë„ | temperature | max_tokens | timeout |
|------|-------------|------------|---------|
| ì˜ë„ ë¶„ë¥˜ | 0.1 | 200 | 10s |
| ë©”ëª¨ ë¶„ë¥˜ | 0.3 | 200 | 10s |
| ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ | 0.1 | 20 | 5s |

### í™˜ê²½ë³€ìˆ˜

```env
OPENAI_API_KEY=sk-...
```

---

## ìš”ì•½

| êµ¬ì„±ìš”ì†Œ | AI ì‚¬ìš© ì—¬ë¶€ | ì—­í•  |
|----------|-------------|------|
| **classifier.py** | âœ… GPT-4o-mini | ì˜ë„ ë¶„ë¥˜, ë©”ëª¨ ë¶„ë¥˜ |
| **mcp_server.py** | âŒ ì—†ìŒ | 8ê°œ ë„êµ¬ (CRUD) |
| **skill.py** | âœ… (classifier í†µí•´) | ì¹´ì¹´ì˜¤ ìŠ¤í‚¬ í•¸ë“¤ëŸ¬ |
| **memo_service.py** | âœ… (classifier í†µí•´) | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |

**í•µì‹¬ ì›ì¹™:**
1. **ê¸°ë³¸ ì €ì¥** = ì²« ë‹¨ì–´ê°€ ì¹´í…Œê³ ë¦¬ (AI ì—†ìŒ)
2. **AI ë¶„ë¥˜** = "AI:" ì ‘ë‘ì‚¬ ë˜ëŠ” `use_ai=True` ì‹œì—ë§Œ
3. **ì˜ë„ ë¶„ë¥˜** = ê·œì¹™ ìš°ì„  â†’ AI í´ë°±
4. **MCP** = ë°ì´í„° ë„êµ¬ë§Œ, AIëŠ” PlayMCPê°€ ë‹´ë‹¹

---

*ìƒì„±ì¼: 2025-01-06*
